#!/usr/bin/env ruby

$LOAD_PATH.unshift(File.expand_path(File.dirname(__FILE__) + "/../lib"))
ENV["RACK_ENV"] ||= "development"

require "bundler"
Bundler.require(:default, ENV["RACK_ENV"].to_sym)
require "msworddoc-extractor"
require "dicts"
require_relative '../config/app'
require_relative '../config/initializers/array_hack.rb'

Dir["app/models/*.rb"].each { |file| require_relative "../#{file}" }

EM.synchrony do
  #Dicts::Parser::ModernChineseDictParser.new.parse
  Dicts::Parser::StopwordsParser.new.parse
  Dicts::Parser::SynonymsDictParser.new.parse
  Dicts::Parser::WordsDictParser.new.parse
  Dicts::Parser::ChinesePinyinParser.new.parse
  EM.stop
end
puts "parse dicts successfuly"
